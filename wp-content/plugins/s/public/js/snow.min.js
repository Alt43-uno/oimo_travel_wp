!function(){"use strict";if(window.SR7??={},window._tpt??={},SR7.A??={},SR7.F??={},SR7.D??={},void 0!==SR7.A.snow)return;let e={pI:e=>parseInt(e),pF:e=>parseFloat(e),s:e=>String(e),b:e=>"on"===e||!0===e||1===e||"off"!==e&&!1!==e&&0!==e&&e,k:e=>e};SR7.A.snow={style:"",getModuleBasics:(e={},s)=>({u:"compare"==s?void 0:e.u??e.enable??!0}),getLayerBasics:(s={},n)=>{let a="normalize"===n,t={u:"compare"==n?void 0:s.u??s.enable??!1,f:s.f??s.startSlide??1,l:s.l??s.endSlide??"last",max:{n:e[a?"pI":"k"](s.max?.n??s.max?.number??400),o:e[a?"pF":"k"](s.max?.o??s.max?.opacity??1),sin:e[a?"pI":"k"](s.max?.sin??s.max?.sinus??100),size:e[a?"pF":"k"](s.max?.size??s.max?.size??6),sp:e[a?"pI":"k"](s.max?.sp??s.max?.speed??100)},min:{o:e[a?"pF":"k"](s.min?.o??s.min?.opacity??.3),sin:e[a?"pI":"k"](s.min?.sin??s.min?.sinus??1),size:e[a?"pF":"k"](s.min?.size??s.min?.size??.2),sp:e[a?"pI":"k"](s.min?.sp??s.min?.speed??30)}};return a&&(t.f="first"==t.f?1:parseInt(t.f)),t},postProcessLayer:async(e,s,n,a)=>{""+(SR7.M[e].settings?.addOns?.snow?.u??!1)!="false"&&s.addOns?.snow?.u&&(n.addOns??={},n.addOns.snow??=SR7.A.snow.getLayerBasics(s.addOns.snow,"normalize"),n.addOns.snow.canvas=new SR7.F.canvas({wrap:n.el,ctx:"2d",create:!0}),n.addOns.snow.canvas.ctx.scale(_tpt.dpr,_tpt.dpr))},init:e=>{const s=SR7.M[e];s.settings?.addOns?.snow?.u&&(s.addOns??={},SR7.M[e].c.moduleListeners??={},SR7.M[e].c.moduleListeners.snow??={},SR7.A.snow.listeners.init(e))},listeners:{init:e=>{const s=SR7.M[e];let n=SR7.A.snow;_tpt.scrollObserver.observe(s.c.module),n.onFire??={},n.onFire[e]??={},n.listenersAdded||(SR7.F.module.listeners.init(e),_tpt.resizeObserver.observe((e=>{n.resize(e)}),50,e),document.addEventListener("sr.layer.action",(function(s){s.c?.addOns?.snow&&("enterstage"==s.eventtype?(n.buildSnow(s.c,e),n.onFire[s.id][s.c.el.id]=s.c):"leavestage"==s.eventtype&&delete n.onFire[s.id][s.c.el.id])})),document.addEventListener("sr.slide.afterChange",(function(e){if(n.onFire?.[e.id])for(let a in n.onFire[e.id]){if(!_tpt.hop(n.onFire[e.id],a))return;let t=n.onFire[e.id][a];if(!t.global)return;let i=e.current.index+1,o=t.addOns.snow.f,d=t.addOns.snow.l;d="last"==d?s.navLen:parseInt(d),t.addOns.snow.stopped=i<o||i>d}}))),n.listenersAdded??={},n.listenersAdded[e]=!0}},resize:e=>{if(SR7.A.snow.onFire)for(let n in SR7.A.snow.onFire[e])_tpt.hop(SR7.A.snow.onFire[e],n)&&s(SR7.A.snow.onFire[e][n])},buildSnow:(e,s)=>{let n=SR7.A.snow,a=e.addOns.snow;for(a.paused=!1,a.stopped=!1,a.snowflakes=[];a.snowflakes.length<a.max.n;)a.snowflakes.push(n.buildSnowflake(a));n.bindedRender=a=>{n.render(e,s,a)},a.frame=requestAnimationFrame(n.bindedRender)},buildSnowflake:e=>{const s=e.min.size+Math.random()*(e.max.size-e.min.size);return{delta:(e.min.sin+Math.random()*(e.max.sin-e.min.sin))*Math.round(2*Math.random()-1),r:s,alpha:e.min.o+Math.random()*(e.max.o-e.min.o),speed:(e.min.sp+Math.random()*(e.max.sp-e.min.sp))*s/3,x:Math.random()*e.canvas.canvas.width/_tpt.dpr,y:Math.random()*-e.canvas.canvas.height/_tpt.dpr}},render:(e,s,n)=>{let a=SR7.A.snow,t=e.addOns.snow;if(t.destroyed||(t.frame=cancelAnimationFrame(t.frame),t.frame=requestAnimationFrame(a.bindedRender)),!SR7.M[s]?.states?.inViewPort)return void(t.time=!1);if(void 0===n||void 0===t.time)return void(t.time=n);t.tDiff=n-t.time,t.time=n;let i=t.canvas.canvas.getContext("2d"),o=t.canvas.canvas.height/_tpt.dpr,d=t.canvas.canvas.width/_tpt.dpr,r=o/3,l=2*r,w=t.time?3e3/(t.tDiff<30?t.tDiff:30):100;i.clearRect(0,0,d,o);for(let e in t.snowflakes)if(!t.stopped||t.stopped&&t.snowflakes[e].y+.1*t.snowflakes[e].r>=0&&t.snowflakes[e].y<=o+t.snowflakes[e].r){t.snowflakes[e].delta+=t.snowflakes[e].delta==Math.PI/2?-t.snowflakes[e].delta:Math.random()/500-.01,t.snowflakes[e].x+=Math.sin(t.snowflakes[e].delta)*(.1*t.snowflakes[e].r),t.snowflakes[e].y+=t.snowflakes[e].speed/w+.1*t.snowflakes[e].r,t.snowflakes[e].y>o+t.snowflakes[e].r&&(t.stopped?t.snowflakes[e]=a.buildSnowflake(t):t.snowflakes[e].y=0);let s=t.snowflakes[e].y-r,n=t.snowflakes[e].r,f=t.snowflakes[e].alpha;if(s>0){let a=1-s/l;n=t.snowflakes[e].r*a,f=t.snowflakes[e].alpha*a}n=.1>n?.1:n,t.snowflakes[e].x=t.snowflakes[e].x>d+n?0:t.snowflakes[e].x<-n?d:t.snowflakes[e].x,i.beginPath(),i.arc(t.snowflakes[e].x,t.snowflakes[e].y,n,0,2*Math.PI),i.fillStyle="rgba(255,255,255,"+(.1>f?.1:f)+")",i.fill(),i.closePath()}}};const s=e=>{if(!e.addOns?.snow?.easel)return;let s=e.addOns.snow,{width:n,height:a}=e.canvas.canvas;s.easel.canvas.width=n,s.easel.canvas.height=a};_tpt.R??={},_tpt.R.snow=_tpt.extend?_tpt.extend(_tpt.R.snow,{status:2,version:"1.0"}):{status:2,version:"1.0"},window.dispatchEvent(new CustomEvent("SR7SnowReady"))}();